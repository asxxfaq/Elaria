<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Elaria - Necklaces</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="necklaces.css">
</head>
<body>
    <nav class="elaria-navbar">
        <div class="navbar-top">
            <div class="logo">
                <a href="index.html">
                    <img src="elaria.png" alt="Elaria Logo">
                </a>
            </div>
        
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="Search for Gold Jewellery, Diamond Jewellery and more..." class="search-input">
                <button class="search-icon" id="searchButton"><i class="fa fa-search"></i></button>
            </div>
        
            <div class="navbar-utility-right">
                <a href="favourites.html" class="icon-link"><i class="fa-solid fa-heart"></i></a>
                <a href="login.html" class="icon-link"><i class="fa-solid fa-user"></i></a>
                <a href="cart.html" class="icon-link">
                    <i class="fa-solid fa-cart-shopping"></i>
                    <span class="cart-count"></span>
                </a>
        
                <button class="menu-toggle" id="menuToggle"><i class="fa-solid fa-bars"></i></button>
            </div>
        </div>
    
        <div class="navbar-bottom" id="navbarBottom">
            <ul class="menu-list">
                <li>
                    <a href="dailywears.html">
                        <img src="dailywearslogo.jpg" alt="Daily Wears" class="menu-icon-img">
                        Daily Wears
                    </a>
                </li>
                <li>
                    <a href="necklaces.html">
                        <img src="necklacelogo.jpg" alt="Necklaces" class="menu-icon-img">
                        Necklaces
                    </a>
                </li>
                <li>
                    <a href="earings.html">
                        <img src="earings.jpg" alt="Earrings" class="menu-icon-img">
                        Earrings
                    </a>
                </li>
                <li>
                    <a href="rings.html">
                        <img src="rings.jpg" alt="Rings" class="menu-icon-img">
                        Rings
                    </a>
                </li>
                <li>
                    <a href="wedding.html">
                        <img src="wedding.jpg" alt="Wedding" class="menu-icon-img">
                        Wedding
                    </a>
                </li>
                <li>
                    <a href="gifting.html">
                        <img src="gift.jpg" alt="Gifting" class="menu-icon-img">
                        Gifting
                    </a>
                </li>
            </ul>
        </div>
        
    </nav>

    <div class="necklace-page-container">
        <h1 class="page-title">Necklaces & Chains Collection</h1>
        <p class="page-subtitle">From dainty lockets to magnificent bridal sets, find your perfect centerpiece.</p>

        <div class="row"> 
            <div class="col-lg-3 d-none d-lg-block"> 
                <div class="filter-sidebar"> 
                    <h2 class="filter-heading">Filters</h2> 
                    <div class="filter-group"> 
                        <p class="filter-title">Necklace Type</p> 
                        <div class="form-check"> <input class="form-check-input" type="checkbox" id="choker"> <label class="form-check-label" for="choker">Chokers (45)</label> </div> 
                        <div class="form-check"> <input class="form-check-input" type="checkbox" id="collar" > <label class="form-check-label" for="collar">Collar (15)</label> </div> 
                        <div class="form-check"> <input class="form-check-input" type="checkbox" id="rani-haar"> <label class="form-check-label" for="rani-haar">Rani Haar (8)</label> </div> 
                        <div class="form-check"> <input class="form-check-input" type="checkbox" id="simple-chain"> <label class="form-check-label" for="simple-chain">Simple Chains (72)</label> </div> 
                    </div> 
                    <div class="filter-group"> 
                        <p class="filter-title">Metal</p> 
                        <div class="form-check"> <input class="form-check-input" type="checkbox" id="gold" > <label class="form-check-label" for="gold">Yellow Gold</label> </div> 
                        <div class="form-check"> <input class="form-check-input" type="checkbox" id="diamond"> <label class="form-check-label" for="diamond">Diamond Studded</label> </div> 
                        <div class="form-check"> <input class="form-check-input" type="checkbox" id="rose"> <label class="form-check-label" for="rose">Rose Gold</label> </div> 
                    </div> 
                    <div class="filter-group"> 
                        <p class="filter-title">Price Range</p> 
                        <input type="range" class="form-range" min="10000" max="500000" step="1000" id="priceRange"> 
                        <p class="price-display">â‚¹ 50,000 - â‚¹ 2,50,000</p> 
                    </div> 
                    <button class="btn btn-apply-filter w-100">Apply Filters</button> 
                </div> 
            </div>

            <div class="col-lg-9">
                <div class="sorting-bar d-flex justify-content-between align-items-center mb-3">
                    <span class="product-count">140 Products Found</span>
                    <select class="form-select sort-dropdown w-auto">
                        <option selected>Sort by Relevance</option>
                        <option value="1">Price: Low to High</option>
                        <option value="2">Price: High to Low</option>
                        <option value="3">Newest Arrivals</option>
                    </select>
                </div>

                <div class="row row-cols-2 row-cols-md-3 g-4 product-grid">
                </div>
            </div>
        </div>
    </div>

    <div class="text-center mt-4 mb-5" id="loadMoreContainer">
        <a href="collections.html">
        <button id="loadMoreBtn" class="btn-load-more">
            Load More Products 
        </button>
    </a>
    </div>

    <footer class="main-footer">
        <div class="footer-content-wrapper">
    
          <div class="footer-logo"
            style= "background-image: url(elaria.png); background-repeat: no-repeat; background-size: contain;">.</div>
    
          <div class="footer-grid">
            <div class="footer-col">
              <p class="col-heading">Useful Links</p>
              <ul>
                <li><a href="delivery.html">Delivery Information</a></li>
                <li><a href="delivery.html">International Shipping</a></li>
                <li><a href="payment.html">Payment Options</a></li>
                <li><a href="track.html">Track your Order</a></li>
                <li><a href="return.html">Returns</a></li>
              </ul>
            </div>
    
            <div class="footer-col">
              <p class="col-heading">Information</p>
              <ul>
                <li><a href="blog.html">Blog</a></li>
                <li><a href="offers.html">Offers & Contest Details</a></li>
                <li><a href="helpandfaq.html">Help & FAQs</a></li>
                <li><a href="about.html">About Elaria</a></li>
                <li><a href="feedback.html">Feedback & Contact Us</a></li>
    
            </div>
    
            <div class="footer-col contact-col">
              <p class="col-heading">Contact Us</p>
              <p class="contact-number">1800-266-0123</p>
    
              <p class="col-heading chat-heading">Chat With Us</p>
              <p class="contact-number">+91 7306614239</p>
    
              <div class="contact-icons">
                <a href="#">ðŸ’¬</a>
                <a href="#">ðŸ“§</a>
                <a href="#">ðŸ“ž</a>
              </div>
            </div>
    
          </div>
    
          <div class="footer-social">
            <p class="col-heading">Social</p>
            <div class="social-icons">
              <a href="#"><i class="fa-brands fa-instagram"> instagram</i>
              </a>
              <a href="#"><i class="fa-brands fa-facebook-f">acebook</i>
              </a>
              <a href="#"><i class="fa-brands fa-twitter"> X</i>
              </a>
              <a href="https://wa.me/7306614239"><i class="fa-brands fa-whatsapp"> whatsapp</i>
              </a>
            </div>
          </div>
    
        </div>
      </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        /***********************
         * 1. Product dataset & Global Constants
         ***********************/
        const ALL_PRODUCTS = [
            { id: 1, title: "Statement Emerald Necklace", price: 155000, oldPrice: 193750, image: 'images/StatementEmeraldNecklace.jpg', type: 'choker', metal: 'gold', tags: ['discount'] },
            { id: 2, title: "Simple Delicate Locket Chain", price: 42000, oldPrice: null, image: 'images/DelicateLocketChain.jpg', type: 'simple-chain', metal: 'gold', tags: [] },
            { id: 3, title: "Traditional Gold Mangalsutra", price: 95500, oldPrice: null, image: 'images/TraditionalGoldMangalsutra.jpg', type: 'collar', metal: 'gold', tags: ['new'] },
            { id: 4, title: "Rose Gold Solitaire Set", price: 210000, oldPrice: null, image: 'images/necklaces15.jpg', type: 'collar', metal: 'rose', tags: [] },
            { id: 5, title: "Simple Diamond Chain", price: 78000, oldPrice: null, image: 'images/SimpleDiamondChain.jpg', type: 'simple-chain', metal: 'diamond', tags: [] },
            { id: 6, title: "Bridal V-Shape Necklace", price: 345000, oldPrice: null, image: 'images/BridalV-ShapeNecklace.jpg', type: 'rani-haar', metal: 'gold', tags: [] }
        ];
    
        const WISHLIST_STORAGE_KEY = 'elaria_wishlist';
        const CART_STORAGE_KEY = 'cart';
    
        const productGrid = document.querySelector('.product-grid');
        const productCountSpan = document.querySelector('.product-count');
        const sortDropdown = document.querySelector('.sort-dropdown');
        
        /***********************
         * 2. Wishlist Logic (FIXED)
         ***********************/
    
        function getWishlist() {
            return JSON.parse(localStorage.getItem(WISHLIST_STORAGE_KEY) || '[]');
        }
    
        function saveWishlist(wishlist) {
            localStorage.setItem(WISHLIST_STORAGE_KEY, JSON.stringify(wishlist));
        }
    
        function toggleWishlist() {
            const icon = this;
            // FIX: Get the ID as a string directly from the attribute
            const productIdString = icon.getAttribute('data-product-id'); 
            
            // Find product data using the ID (converted to Number for ALL_PRODUCTS array lookup)
            const productIdNumber = parseInt(productIdString);
            const productData = ALL_PRODUCTS.find(p => p.id === productIdNumber); 
            
            if (!productData) {
                console.error("Wishlist error: Product data not found for ID:", productIdString);
                return;
            }
    
            let wishlist = getWishlist();
            // FIX: Use the string ID for comparison against stored wishlist
            const isFavorited = wishlist.some(item => String(item.id) === productIdString);
    
            if (isFavorited) {
                // FIX: Use the string ID for filtering
                wishlist = wishlist.filter(item => String(item.id) !== productIdString);
                
                // Visual feedback
                icon.classList.remove('fa-solid');
                icon.classList.add('fa-regular');
                icon.style.color = '#fff'; 
                
                showToast(`${productData.title} removed from favorites.`);
    
            } else {
                // Add to wishlist
                wishlist.push({
                    // Ensure ID is saved as a string to be consistent with other pages
                    id: productIdString, 
                    title: productData.title,
                    image: productData.image,
                    price: productData.price 
                });
                
                // Visual feedback
                icon.classList.remove('fa-regular');
                icon.classList.add('fa-solid');
                icon.style.color = '#8A2D3C'; 
    
                showToast(`${productData.title} added to favorites!`);
            }
    
            saveWishlist(wishlist);
        }
    
        function attachWishlistListeners() {
            document.querySelectorAll('.wishlist-icon').forEach(icon => {
                icon.removeEventListener('click', toggleWishlist);
                icon.addEventListener('click', toggleWishlist);
    
                // Initialize icon state
                // FIX: Get the ID as a string
                const productIdString = icon.getAttribute('data-product-id');
                const wishlist = getWishlist();
                // FIX: Use the string ID for comparison
                const isFavorited = wishlist.some(item => String(item.id) === productIdString);
    
                if (isFavorited) {
                    icon.classList.remove('fa-regular');
                    icon.classList.add('fa-solid');
                    icon.style.color = '#8A2D3C';
                } else {
                    icon.classList.remove('fa-solid');
                    icon.classList.add('fa-regular');
                    icon.style.color = '#fff';
                }
            });
        }
    
    
        /***********************
         * 3. Product Rendering
         ***********************/
        function renderProducts(list) {
            productCountSpan.textContent = `${list.length} Products Found`;
    
            const html = list.map(p => {
                const discountBadge = (p.tags && p.tags.includes('discount')) ? `<span class="discount-badge">-20%</span>` :
                                         (p.tags && p.tags.includes('new')) ? `<span class="discount-badge">New</span>` : '';
                return `
                <div class="col">
                    <div class="product-card">
                        <div class="card-img" style="background-image: url('${p.image}');">
                            ${discountBadge}
                            <i class="fa-regular fa-heart wishlist-icon" data-product-id="${p.id}"></i>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">${p.title}</h5>
                            <p class="card-price">â‚¹ ${p.price.toLocaleString('en-IN')}</p>
                            <a href="#" class="btn btn-add-cart" data-product-id="${p.id}">Add to Cart</a>
                        </div>
                    </div>
                </div>
                `;
            }).join('');
    
            productGrid.innerHTML = html;
    
            // Re-attach listeners for wishlist + add to cart
            attachWishlistListeners();
            attachAddToCartListeners();
        }
    
        /***********************
         * 4. Add to Cart Logic (Refined)
         ***********************/
        function attachAddToCartListeners() {
            document.querySelectorAll('.btn-add-cart').forEach(button => {
                button.removeEventListener('click', handleAddToCartClick);
                button.addEventListener('click', handleAddToCartClick);
            });
        }
    
        function handleAddToCartClick(e) {
            e.preventDefault();
            
            let cart = JSON.parse(localStorage.getItem(CART_STORAGE_KEY)) || [];
            const productId = this.dataset.productId;
            
            // Find product data using the ID (converted to Number for ALL_PRODUCTS array lookup)
            const productIdNumber = parseInt(productId);
            const productData = ALL_PRODUCTS.find(p => p.id === productIdNumber);
    
            if (!productData) {
                showToast('Product data not found. Please try again.');
                return;
            }
    
            const product = {
                // Store ID as a string for consistency across all cart/wishlist pages
                id: String(productData.id),
                name: productData.title,
                price: Number(productData.price),
                image: productData.image,
            };
    
            const existing = cart.find(item => item.id === product.id);
            if (existing) {
                existing.qty = (existing.qty || 0) + 1;
            } else {
                cart.push({ ...product, qty: 1 });
            }
    
            localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart));
            updateCartCount();
            showToast(`${product.name} added to cart!`);
        }
    
        /***********************
         * 5. Utility Functions
         ***********************/
        function updateCartCount() {
            const cartIconLink = document.querySelector('.navbar-utility-right a[href="cart.html"]');
            if (!cartIconLink) return;
            
            let countBadge = cartIconLink.querySelector('.cart-count'); 
            
            if (!countBadge) {
                countBadge = document.createElement('span');
                countBadge.className = 'cart-count'; 
                cartIconLink.appendChild(countBadge);
            }
            
            const cart = JSON.parse(localStorage.getItem(CART_STORAGE_KEY) || '[]');
            const totalItems = cart.reduce((sum, item) => sum + (item.qty || 1), 0);
            
            countBadge.textContent = totalItems > 0 ? totalItems : '';
            countBadge.style.display = totalItems > 0 ? 'inline-block' : 'none';
        }
    
        function showToast(message) {
            const t = document.createElement('div');
            t.textContent = message;
            t.className = 'custom-toast'; 
            t.style.position = 'fixed';
            t.style.right = '20px';
            t.style.bottom = '20px';
            t.style.background = '#8A2D3C'; 
            t.style.color = '#fff';
            t.style.padding = '10px 14px';
            t.style.borderRadius = '6px';
            t.style.boxShadow = '0 6px 18px rgba(0,0,0,0.15)';
            t.style.zIndex = 9999;
            t.style.opacity = '0';
            t.style.transition = 'opacity 0.2s ease, transform 0.2s ease';
            t.style.transform = 'translateY(8px)';
            document.body.appendChild(t);
            requestAnimationFrame(() => { t.style.opacity = '1'; t.style.transform = 'translateY(0)'; });
            setTimeout(() => {
                t.style.opacity = '0';
                t.style.transform = 'translateY(8px)';
                setTimeout(() => t.remove(), 300);
            }, 1800);
        }
        
        function applySorting() {
            const val = sortDropdown.value;
            let list = [...ALL_PRODUCTS]; 
            if (val === '1') list.sort((a,b) => a.price - b.price);
            else if (val === '2') list.sort((a,b) => b.price - a.price);
            else if (val === '3') list.sort((a,b) => b.id - a.id);
            renderProducts(list);
        }
    
        /***********************
         * 6. Init on load
         ***********************/
        document.addEventListener('DOMContentLoaded', () => {
            // Initial setup
            renderProducts(ALL_PRODUCTS);
            updateCartCount();
    
            // Event listeners
            sortDropdown.addEventListener('change', applySorting);
            
            // Search functionality
            const searchInput = document.getElementById('searchInput');
            const searchButton = document.getElementById('searchButton');
            
            function performSearch() {
                const q = searchInput.value.trim();
                if (!q) { alert('Please enter a search term.'); return; }
                showToast(`Searching for: ${q}`);
            }
            
            searchButton.addEventListener('click', performSearch);
            searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') performSearch(); });
            
            // Mobile Menu Toggle 
            const menuToggle = document.getElementById('menuToggle');
            const navbarBottom = document.getElementById('navbarBottom');
            if(menuToggle && navbarBottom) {
                menuToggle.addEventListener('click', () => {
                    navbarBottom.classList.toggle('active');
                    // Toggle icon for visual feedback
                    menuToggle.querySelector('i').classList.toggle('fa-bars');
                    menuToggle.querySelector('i').classList.toggle('fa-xmark');
                });
            }
            
        });
    </script>
</body>
</html>